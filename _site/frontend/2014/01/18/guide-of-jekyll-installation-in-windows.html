<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>Windows 下安装 jekyll - Front Wind</title>
	<link href='http://fonts.googleapis.com/css?family=Roboto+Condensed:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" media="screen" href="/css/layout.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/post.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/category.css" />
	<link rel="stylesheet" type="text/css" media="screen" href="/css/disqus.css" />
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />
    <link rel="stylesheet" type="text/css" href="/css/shCoreDefault.css" />
    <script type="text/javascript" src="/js/shCore.js"></script>
    <script type="text/javascript" src="/js/shBrushJScript.js"></script>
    <script type="text/javascript">SyntaxHighlighter.all();</script>
</head>
<body>
    <div id="header-wrapper">
    <div id="header">
        <div id="logo">
            <img src="/image/logo.gif" alt="Logo" />
        </div>
        <div id="search">
            <form id="cse" method="get" action="http://www.google.com/cse">
                <input value="006457635157451804399:jraxz7uuhew" name="cx" type="hidden" />
                <input value="FORID:11" name="cof" type="hidden" />
                <input type="text" name="q" id="q" placeholder="search" />
                <input name="sa" class="sbutton" type="submit" style="display: none" />
            </form>
            <!--<div id="search-icon">
                <img src="/image/search.png" alt="Search Icon" />
            </div>-->
        </div>

    </div>
	<div id="navigation">
        <div id="rss">
            <a href="#"><img src="/image/rssbw.png" alt="Rss" title="Rss" /></a>
        </div>
        <div id="write">
            <a href="#"><img src="/image/writebw.png" alt="Leave me a message" title="给我留言" /></a>
        </div>
        <div id="nav-wrapper">
            <div id="menu">
                <ul>
                    
                        <li><a href="/index.html">Home</a></li>
                    
                        <li><a href="/frontend.html">FrontEnd</a></li>
                    
                        <li><a href="/translation.html">Translation</a></li>
                    
                        <li><a href="/essay.html">Essay</a></li>
                    
                        <li><a href="/about.html">About</a></li>
                    
                </ul>
            </div>
        </div>
    </div>
</div>

    <div id="page">
        <div id="sidebar-container">
    <div class="sidebar">
        <div id="clock" class="sidebar-info">
            <canvas id="canvas" height="150" width="150"></canvas>
        </div>
    </div>
    <div class="sidebar">
        <h3>分类</h3>
        <ul class="sidebar-info">
            
            <li>
                
                    <a href="/essay.html">
                
                        essay
                    </a>
                    <span>(5)</span>
            </li>
            
            <li>
                
                        frontend
                    </a>
                    <span>(1)</span>
            </li>
            
            <li>
                
                    <a href="/translation.html">
                
                        translation
                    </a>
                    <span>(1)</span>
            </li>
            
        </ul>
    </div>
    <div class="sidebar">
        <h3>Tags</h3>
        <ul class="sidebar-info">
            
            <li>
                <a href="/tags.html#test">
                    test
                </a>
                <span>(2)</span>
            </li>
            
            <li>
                <a href="/tags.html#English">
                    English
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#情感">
                    情感
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#jekyll">
                    jekyll
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#github">
                    github
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#Google">
                    Google
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#Adobe">
                    Adobe
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#Regions">
                    Regions
                </a>
                <span>(1)</span>
            </li>
            
            <li>
                <a href="/tags.html#产品">
                    产品
                </a>
                <span>(2)</span>
            </li>
            
        </ul>
    </div>
    <div class="sidebar">
        <h3>博客归档</h3>
        <ul class="sidebar-info">
            
                
            
            
                
                <li><a href="archive.html#2013">2013</a></li>
                
            
                
                <li><a href="archive.html#2012">2012</a></li>
                
            
                
                <li><a href="archive.html#2011">2011</a></li>
                
            
                
                <li><a href="archive.html#2010">2010</a></li>
                
            
                
                <li><a href="archive.html#2009">2009</a></li>
                
            
                
                <li><a href="archive.html#2008">2008</a></li>
                
            
        </ul>
    </div>
</div>
        
            <div class="single-post">
    <div class="aboutPost">
	    <div class="post-time">
	        <div class="arrow"></div>
		    <div class="time">
		        <p class="day">18</p>
			    <p class="month_year">2014·Jan</p>
		    </div>
		    <div class="category">
		        
			        <p>
				    
				        
					    <a href="/frontend.html">
					    
					        frontend
					    </a>
				    
				    </p>
			    
		    </div>
		    <div class="tag">
		        
			        <p>
				    
				        
					    <a href="/tags.html#jekyll">jekyll</a>,
					    
				    
				        
					    <a href="/tags.html#github">github</a>
					    
				    
				    </p>
			    
		    </div>
		    <div class="comment">
		        <p><a href="/frontend/2014/01/18/guide-of-jekyll-installation-in-windows.html#disqus_thread">0</a></p>
		    </div>
	    </div>
	    <!--<div id="relatedPost">
	        <h3>相关文章</h3>
		    <div id="conBox">
		        <ul>
			    </ul>
		    </div>
	    </div>-->
	</div>
	<div class="content">
	    <h2>Windows 下安装 jekyll</h2>
		<div>
	<p>
		自学了一点前端开发之后，为了学以致用，也想将那些零碎的知识贯通起来，真正做一个略微大些的项目，便利用 <a href="https://github.com/" target="_blank">github</a> 的 <a href="http://pages.github.com/" target="_blank">pages</a> 搭建了这个博客。具体的搭建过程和概念的解释可参考<a href="http://www.ruanyifeng.com/blog/2012/08/blogging_with_jekyll.html" target="_blank">这里</a>。值得一提的是，我在搭建博客的时候创建的是这样的 repository：tiemuxu.github.com，并在 master 分支下做所有操作。建议新手可同时参考另一篇精简的<a href="http://hzmook.github.io/2012/07/01/use-jekyll-build-blog-on-github.html" target="_blank">文章</a>，或者自行 Google ，相信最终都能够将自己的博客搭建出来。这里就不再赘述。
	</p>
	<br />
	<p>
		在开发过程中，需要将代码 commit 到 github 上，才能查看效果。因此常常发生的情况是，新的 commit 只是为了修复上一次的某些零碎 bug，如果人再粗心点，提交代码后才发现还有漏网之鱼，于是还得再来一次，如此反复。导致 github 上的 commit 历史很难有 milestone 式的版本记录，同时也增加了开发的繁琐度。那么在本地配置开发环境就显得尤为必要了。github 使用 <a href="http://jekyllrb.com/" target="_blank">jekyll</a> 来将网页源码转变为网页。因此，所需的开发环境就是本地的 jekyll。
	</p>
	<br />
	<p>
		<b>首先</b>，需要安装 Ruby 环境和 RubyGem。最简单有效的方式是使用 <a href="http://rubyinstaller.org/downloads/" target="_blank">RubyInstaller</a>，下载安装即可（我安装的是最新版本 Ruby2.0.0-p353）。
	</p>
	<br />
	<p>
	 	<b>然后</b>，还需要安装 <a href="http://rubyinstaller.org/downloads/">Development Kit</a>(DevKit)，同样选择合适的版本。下载后运行该 exe 文件，将其解压到任意位置，这里建议解压为 'C:\Devkit' ,然后运行 'Start Command Prompt with Ruby'（类似于cmd的命令行控制台），通过命令行安装：
	</p>
	<div class="cmdLine">
		<p>C:\Users\muxu&gt;cd C:\DevKit</p>
		<p>C:\DevKit&gt;ruby dk.rb init</p>
		<p>C:\DevKit&gt;ruby dk.rb install</p>
	</div>
	<p>
		显示如下信息时表示 DevKit 已经安装成功：
	</p>
	<div class="cmdLine">
		<p>[INFO] Updating convenience notice gem override for 'C:/ruby200'</p>
		<p>[INFO] Installing 'C:/ruby200/lib/ruby/site_ruby/devkit.rb'</p>
	</div>
	<br />
	<p>
		<b>接下来</b>，可以安装 jekyll 了，在相同的目录下运行：
	</p>
	<div class="cmdLine">
		<p>C:\DevKit&gt;gem install jekyll</p>
	</div>
	<br />
	<p>
		<b>最后</b>，再来安装 Rdiscount，用以解析 Markdown 标记。如果使用的是 Textile，则安装 Kramdown：
	</p>
	<div class="cmdLine">
		<p>C:\DevKit&gt;gem install rdiscount</p>		
	</div>
	<br />
	<p>
		通过以上步骤，所有的环境和依赖包都已安装成功。进入博客的仓库目录（如 cd tiemuxu.github.com），用下面的命令来启动 jekyll：
	</p>
	<div class="cmdLine">
		<p>
			C:\Users\muxu\tiemuxu.github.com&gt;jekyll serve
		</p>
	</div>
	<br />
	<p>
		本以为能够大功告成，控制台里却出现类似如下的错误提示：
	</p>
	<div class="cmdLine">
		<p>
			error: invalid byte sequence in GBK.
		</p>
	</div>
	<p>
		Google 后得知，博客的源代码中包含中文字符，而 Ruby 控制台并不支持UTF-8编码。那么解决问题的思路就很明显了，只需要想办法使其支持就行。 Google 再次帮我找到了答案——在执行 jekyll 命令前，可以用命令将控制台的代码格式转为 UTF-8：
	</p>
	<div class="cmdLine">
		<p>C:\Users\tiemuxu.github.com&gt;chcp 65001</p>
		<p>C:\Users\tiemuxu.github.com&gt;jekyll serve</p>
	</div>
	<p>然后终于在控制台里看到成功运行的提示：</p>
	<div class="cmdLine">
		<p>Configuration file: C:/Users/muxu/tiemuxu.github.com/_config.yml</p>
		<p>Source: C:/Users/muxu/tiemuxu.github.com</p>
		<p>Destination: C:/Users/muxu/tiemuxu.github.com/_site</p>
		<p>Genetating...: done.</p>
		<p>Server address: https://127.0.0.1:4000</p>
		<p>Server running... press ctrl-c to stop.</p>
	</div>
	<br />
	<p>
		可是事情并没有结束，当我满怀期待地在浏览器里访问该地址时，看到的却是 'Not Found' 的错误，郁闷到差点一口老血喷出来。我平静下来想了想，作为技术人员希望事情一切顺利从来就是个小概率事件。如同在开发过程中，不管自己觉得代码写得再如何完美，也总会有 bug 存在。所以遇到问题不要着急上火，而是继续搜寻<a href="https://github.com/jekyll/jekyll/issues/1342" target="_blank">答案</a>。原来需要把博客代码仓库里的配置文件 _config.yml 中的 baseurl 删除，然后重启服务。谢天谢地，它终于跑起来了，这几乎快要让我“泪流满面”，连在客厅里打电话的室友都以为我疯了，连声问我“何弃疗”。
	</p>
	<br />
	<p>
		哦，对了，如果默认的 'server address' 是 '0.0.0.0:4000' 的话，可以到 'C:\Ruby200\lib\ruby\gems\2.0.0\gems\jekyll-1.4.2\lib\jekyll' 目录下修改 configuration 文件，改成自己喜欢的 IP 和端口。到此为止，本地的开发环境已经搭建完毕，之后提交代码或者写了新的文章，就可以先在本地预览，将结果调整到自己最满意的状态，再一次性提交它们，岂不是方便而高效吗？ 
	</p>
</div>
	</div>
	<div id="disqus_thread"></div><script type="text/javascript">    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */    var disqus_shortname = 'tiemuxu'; // required: replace example with your forum shortname    /* * * DON'T EDIT BELOW THIS LINE * * */    (function() {        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);    })();</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>    
</div>

    	<div class="clear"></div>      
    </div>
    <div id="hiddenBar">
    <div id="hBground"></div>
    <div id="tiemuxu">
	    <p>铁</p>
	    <p>木</p>
	    <p>须</p>
	</div>
    <div id="hide-sidebar">
	    <div class="avatar" id="hide-avatar">
            <img src="/image/avatar.jpg" alt="博主的头像" />
        </div>
		<div class="about" id="hide-about">
            <p>年龄：26</p>
            <p>现居：上海</p>
            <p>院校：同济大学</p>
            <p>状态：突然就成了产品汪</p>
            <p>邮箱：tiemuxu@gmail.com</p>
        </div>
        <ul class="social" id="hide-social">
            <li id="gplus"><a href="https://plus.google.com/u/0/101711933192711426030"></a></li>
            <li id="twi"><a href="https://twitter.com/tiemuxu"></a></li>
            <li id="dou"><a href="http://www.douban.com/people/tiemuxu/"></a></li>
            <li id="weibo"><a href="http://weibo.com/tiemuxu"></a></li>
        </ul>   
    </div>
</div>
    <div id="footer">
    <p class="copyright">Copyright &copy; 2013 tiemuxu. All rights reserved. </p>
    <p class="designer">Designed by <a href="http://www.douban.com/people/tiemuxu/">铁木须</a>.</p>
</div>
    
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'tiemuxu'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
    </script>
     <script>
    //   (function() {
    //     var cx = '006457635157451804399:jraxz7uuhew';
    //     var gcse = document.createElement('script');
    //     gcse.type = 'text/javascript';
    //     gcse.async = true;
    //     gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
    //         '//www.google.com/cse/cse.js?cx=' + cx;
    //     var s = document.getElementsByTagName('script')[0];
    //     s.parentNode.insertBefore(gcse, s);
    //   })();
     </script>
    <!-- <gcse:search></gcse:search> -->
</body>
<script type="text/javascript" src="/js/jquery-1.9.1.js"></script>

<script type="text/javascript" src="/js/Tiemuxu.js"></script>
<script type="text/javascript" src="/js/NavBar.js"></script>
<script type="text/javascript" src="/js/BlogPage.js"></script>
<script type="text/javascript" src="/js/Widgets.js"></script>
<script type="text/javascript" src="/js/HidnBar.js"></script>
<script type="text/javascript" src="/js/main.js"></script>
</html>
